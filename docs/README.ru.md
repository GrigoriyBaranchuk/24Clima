# 24Clima — Документация проекта

Документация для разработчиков (в том числе junior и стажёров). Сайт компании 24clima: услуги по кондиционерам в Панаме, калькулятор стоимости чистки, мультиязычность (ES/EN/RU).

---

## Оглавление

1. [Что это за проект](#1-что-это-за-проект)
2. [Стек технологий](#2-стек-технологий)
3. [Структура проекта](#3-структура-проекта)
4. [Как запустить проект](#4-как-запустить-проект)
5. [Калькулятор стоимости](#5-калькулятор-стоимости)
6. [Локализация (i18n)](#6-локализация-i18n)
7. [SEO и индексация](#7-seo-и-индексация)
8. [Деплой на Vercel](#8-деплой-на-vercel)
9. [Безопасность и конфиденциальность](#9-безопасность-и-конфиденциальность)

---

## 1. Что это за проект

- **Сайт:** [24clima.com](https://24clima.com)
- **Назначение:** лендинг сервиса по установке, чистке, ремонту и обслуживанию кондиционеров в Панама-Сити.
- **Основные функции:**
  - Калькулятор стоимости чистки (выбор количества кондиционеров и пакета).
  - Описание услуг и типовых проблем (не охлаждает, течёт, шумит и т.д.).
  - Контакты и кнопки WhatsApp для заявок.
  - Три языка: испанский (по умолчанию), английский, русский.

---

## 2. Стек технологий

| Технология | Назначение |
|------------|------------|
| **Next.js 15** | Фреймворк (App Router, статический экспорт). |
| **React 18** | UI. |
| **TypeScript** | Типы и безопасность кода. |
| **Tailwind CSS** | Стили. |
| **next-intl** | Мультиязычность (локали). |
| **Vercel** | Хостинг и деплой. |

- Сборка: `bun` (или `npm`/`yarn`).
- Линтеры: ESLint, Biome.

---

## 3. Структура проекта

```
24clima_calculator_ver55/
├── public/                 # Статические файлы
│   ├── robots.txt         # Правила для поисковых роботов (индексация разрешена)
│   ├── sitemap.xml        # Карта сайта для Google и др.
│   ├── favicon.svg
│   ├── images/
│   └── uploads/           # Изображения услуг
├── src/
│   ├── app/
│   │   ├── layout.tsx     # Корневой layout (минимальный)
│   │   ├── page.tsx       # Редирект с / на /es/
│   │   ├── globals.css
│   │   └── [locale]/      # Локализованные страницы
│   │       ├── layout.tsx # Метаданные, шрифты, JSON-LD, скрипты
│   │       ├── page.tsx   # Главная (Hero, Calculator, Services, Contact...)
│   │       └── servicios/
│   │           └── [service]/page.tsx  # Страницы услуг (cleaning, repair...)
│   ├── components/        # React-компоненты
│   │   ├── Calculator.tsx # Калькулятор стоимости чистки
│   │   ├── Header.tsx, Footer.tsx, Hero.tsx
│   │   ├── Services.tsx, CleaningPackages.tsx, Contact.tsx
│   │   ├── GoogleAnalytics.tsx, MetaPixel.tsx
│   │   └── ui/            # UI-кит (кнопки, карточки и т.д.)
│   ├── i18n/              # Конфиг локалей и роутинг
│   │   ├── config.ts      # locales: es, en, ru
│   │   ├── request.ts
│   │   └── routing.ts
│   └── lib/
│       ├── constants.ts   # WhatsApp, соцсети, название компании
│       ├── seo-keywords.ts # Семантическое ядро (ключевые слова по локалям и услугам)
│       └── utils.ts
├── messages/              # Переводы
│   ├── es.json
│   ├── en.json
│   └── ru.json
├── next.config.js         # next-intl, output: 'export', trailingSlash
├── vercel.json            # Заголовки безопасности, регион
└── docs/
    ├── README.ru.md       # Эта документация
    └── README.en.md       # English documentation
```

**Важно:** используется **статический экспорт** (`output: 'export'`). Нет серверных API routes; все страницы генерируются при сборке.

---

## 4. Как запустить проект

### Требования

- Node.js 18+
- Предпочтительно [Bun](https://bun.sh) (или npm/yarn)

### Установка зависимостей

```bash
bun install
# или: npm install
```

### Режим разработки

```bash
bun run dev
# или: npm run dev
```

Сайт откроется по адресу `http://localhost:3000`. Корень `/` перенаправляет на `/es/`.

### Сборка (как на Vercel)

```bash
bun run build
# или: npm run build
```

Результат статического экспорта — папка `out/`. Её можно раздавать любым статическим хостингом.

### Линт и проверка типов

```bash
bun run lint
# или: npm run lint
```

---

## 5. Калькулятор стоимости

**Файл:** `src/components/Calculator.tsx`

### Назначение

Пользователь выбирает:
- **Количество кондиционеров:** кнопки 1–5 или поле ввода 1–99.
- **Пакет:** Базовый, Рекомендуемый, Премиум.

На основе этого считается итоговая сумма и экономия (при скидке за несколько единиц). Кнопка «Заказать в WhatsApp» открывает чат с предзаполненным сообщением.

### Логика расчёта (не менять без согласования)

- Цены за единицу заданы в объекте `PRICING` по пакетам и позициям (1-й кондиционер дороже, следующие дешевле).
- `priceBreakdown` — массив цен по каждому кондиционеру.
- `total` — сумма `priceBreakdown`.
- `savings` — разница между «полной» ценой (количество × базовая цена) и `total`.

Ключи переводов для калькулятора — в `messages/*.json` в секции `calculator` и `packages`.

### UX

- Блок выбора количества и поле «или введите» выровнены по центру (мобильная и десктопная версии).
- Адаптивность через Tailwind (`sm:`, `lg:`).

---

## 6. Локализация (i18n)

- **Библиотека:** next-intl.
- **Локали:** `es` (по умолчанию), `en`, `ru`. Заданы в `src/i18n/config.ts`.
- **Файлы переводов:** `messages/es.json`, `messages/en.json`, `messages/ru.json`. Структура ключей совпадает между файлами.
- **Использование в коде:** `useTranslations("calculator")`, `t("quantity")` и т.д. В серверных компонентах — `getTranslations`.
- **URL:** `/es/`, `/en/`, `/ru/`. Страницы услуг: `/es/servicios/cleaning/` и т.д.

Добавление нового языка: добавить код локали в `config.ts`, создать `messages/xx.json` по образцу существующих и при необходимости обновить `generateStaticParams` и метаданные.

---

## 7. SEO и индексация

- **robots.txt:** `public/robots.txt` — разрешена индексация (`Allow: /`), указан `Sitemap: https://24clima.com/sitemap.xml`.
- **sitemap.xml:** `public/sitemap.xml` — перечислены главные страницы и страницы услуг для всех локалей.
- **Метаданные:** в `src/app/[locale]/layout.tsx` заданы `title`, `description`, `keywords`, `openGraph`, `canonical`, `robots: { index: true, follow: true }`.
- **JSON-LD:** разметка типа HVACBusiness и WebSite для поисковиков и AI-агентов.
- **Google Search Console:** после деплоя добавьте свойство 24clima.com и отправьте ссылку на sitemap: `https://24clima.com/sitemap.xml`.

### Семантическое ядро

Ключевые запросы для продвижения в Панаме (чистка, ремонт, обслуживание кондиционеров) собраны в **`src/lib/seo-keywords.ts`**:

- **HOME_KEYWORDS** — ключевые слова для главной страницы по локалям (es, en, ru): запросы типа «aire acondicionado Panamá», «limpieza», «mantenimiento», «reparación», «instalación», «carga gas», «24 horas», гео (Ciudad de Panamá, Costa del Este и т.д.).
- **SERVICE_KEYWORDS** — ключевые слова по каждой услуге (`cleaning`, `maintenance`, `repair`, `installation`, `gas-recharge`, `emergency`) и локали.

Использование:

- Главная: `getHomeKeywords(locale)` подставляется в `keywords` в `src/app/[locale]/layout.tsx`.
- Страницы услуг: `getServiceKeywords(serviceSlug, locale)` подставляется в `keywords` в `src/app/[locale]/servicios/[service]/page.tsx`.

При добавлении новых запросов или локалей правьте только `seo-keywords.ts`; метаданные подхватят изменения автоматически.

---

## 8. Раздел «Советы и Руководства» и админка

- **Публичная страница:** `/[locale]/tips/` — список статей HVAC.
- **Статья:** `/[locale]/tips/[slug]/` — отдельная статья.
- **Админка:** `/[locale]/tips/admin/` — вход (email/пароль в Supabase), редактор статей, загрузка изображений, авто-перевод RU→ES/EN.

Для работы раздела нужен Supabase (auth, БД, storage). Подробная настройка: [docs/SETUP_TIPS_ADMIN.md](SETUP_TIPS_ADMIN.md).

---

## 9. Деплой на Vercel

- Подключите репозиторий к Vercel; сборка по умолчанию: `next build`, выход — статический экспорт.
- Домен 24clima.com настраивается в настройках проекта Vercel (Domains).
- Конфигурация: `vercel.json` (заголовки безопасности, регион).

---

## 10. Безопасность и конфиденциальность

- В коде не хранятся пароли и секреты пользователей. Контакты компании (телефон, соцсети) — в `src/lib/constants.ts`.
- В `vercel.json` заданы заголовки: `X-Frame-Options`, `X-Content-Type-Options`, `Referrer-Policy`.
- Аналитика (Google Analytics, Meta Pixel) подключается через переменные окружения на Vercel; в репозитории не коммитить ключи.

---

Если что-то непонятно — смотрите аналогичный код в компонентах и в `messages/*.json`, или задайте вопрос тимлиду/ментору.
